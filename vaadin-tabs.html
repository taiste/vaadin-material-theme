<link rel="import" href="font-icons.html">
<link rel="import" href="color.html">
<link rel="import" href="typography.html">

<link rel="import" href="../vaadin-tabs/src/vaadin-tabs.html">
<link rel="import" href="vaadin-tab.html">

<dom-module id="material-tabs" theme-for="vaadin-tabs">
  <template>
    <style>
      :host {
        -webkit-tap-highlight-color: transparent;
      }

      :host {
        box-shadow: inset 0 -1px 0 0 var(--material-background-color);
        position: relative;
        min-height: 48px;
      }

      :host [part="tabs"] ::slotted(vaadin-tab) {
        justify-content: center;
      }

      [part="forward-button"],
      [part="back-button"] {
        position: absolute;
        z-index: 1;
        font-family: valo-icons;
        color: var(--material-secondary-text-color);
        font-size: 1.5em;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 1.5em;
        height: 100%;
        transition: 0.2s opacity;
        top: 0;
      }

      [part="forward-button"]:hover,
      [part="back-button"]:hover {
        color: inherit;
      }

      [part="forward-button"] {
        right: 0;
      }

      [part="forward-button"]::after {
        content: "\e906";
      }

      [part="back-button"]::after {
        content: "\e903";
      }

      /* Tabs overflow */

      [part="tabs"] {
        --_material-tabs-overflow-mask-image: none;
        -webkit-mask-image: var(--_material-tabs-overflow-mask-image);
        mask-image: var(--_material-tabs-overflow-mask-image);
        /* For IE11 */
        min-height: 44px;
      }

      /* Horizontal tabs overflow */

      /* Both ends overflowing */
      :host([overflow~="start"][overflow~="end"]) [part="tabs"] {
        --_material-tabs-overflow-mask-image: linear-gradient(90deg, transparent 2em, #000 4em, #000 calc(100% - 4em), transparent calc(100% - 2em));
      }

      /* End overflowing */
      :host([overflow~="end"]) [part="tabs"] {
        --_material-tabs-overflow-mask-image: linear-gradient(90deg, #000 calc(100% - 4em), transparent calc(100% - 2em));
      }

      /* Start overflowing */
      :host([overflow~="start"]) [part="tabs"] {
        --_material-tabs-overflow-mask-image: linear-gradient(90deg, transparent 2em, #000 4em);
      }

      :host ::slotted(:not(vaadin-tab)) {
        margin-left: 16px;
      }

      /* Small theme */

      :host([theme~="small"]) {
        font-size: var(--material-subhead-font-size);
        min-height: 36px;
      }

      :host([theme~="small"]) [part="tabs"] {
        min-height: 36px;
      }

      /* Minimal and pill themes */

      :host([theme~="minimal"]),
      :host([theme~="pill"]) {
        box-shadow: none;
        /* This doesn't work with ShadyCSS */
        --_material-tab-marker-display: none;
      }

      /* Workaround for the above ShadyCSS issue */
      :host([theme~="minimal"]) [part="tabs"] ::slotted(vaadin-tab[selected])::before,
      :host([theme~="pill"]) [part="tabs"] ::slotted(vaadin-tab[selected])::before,
      :host([theme~="minimal"]) [part="tabs"] ::slotted(vaadin-tab[selected])::after,
      :host([theme~="pill"]) [part="tabs"] ::slotted(vaadin-tab[selected])::after {
        display: none;
      }

      /* No-button theme */
      :host([theme~="hide-scroll-buttons"]) [part="back-button"],
      :host([theme~="hide-scroll-buttons"]) [part="forward-button"] {
        display: none;
      }

      :host([theme~="hide-scroll-buttons"][overflow~="start"][overflow~="end"]) [part="tabs"] {
        --_material-tabs-overflow-mask-image: linear-gradient(90deg, transparent, #000 2em, #000 calc(100% - 2em), transparent 100%);
      }

      :host([theme~="hide-scroll-buttons"][overflow~="end"]) [part="tabs"] {
        --_material-tabs-overflow-mask-image: linear-gradient(90deg, #000 calc(100% - 2em), transparent 100%);
      }

      :host([theme~="hide-scroll-buttons"][overflow~="start"]) [part="tabs"] {
        --_material-tabs-overflow-mask-image: linear-gradient(90deg, transparent, #000 2em);
      }

      /* Pill theme */
      :host([theme~="pill"]) {
        display: inline-flex;
        max-width: 100%;
        min-height: 36px;
      }

      :host([theme~="pill"]) [part="tabs"] ::slotted(vaadin-tab) {
        border: 1px solid transparent;
        background-color: var(--material-background-color);
        margin-left: 1px;
      }

      :host([theme~="pill"]) [part="tabs"] ::slotted(vaadin-tab:first-child) {
        padding-left: calc(2px + 1em);
        border-radius: 0 0 0 0;
      }

      :host([theme~="pill"]) [part="tabs"] ::slotted(vaadin-tab:last-child) {
        padding-right: calc(2px + 1em);
        border-radius: 0 0 0 0;
      }

      :host([theme~="pill"]) [part="tabs"] ::slotted(vaadin-tab[selected]) {
        border: 1px solid var(--material-background-color);
        background-color: var(--material-base-color);
      }

      :host([theme~="pill"]) [part="tabs"] ::slotted(vaadin-tab[selected]) {
        color: var(--material-primary-text-color);
        box-shadow: 1px 0 0 0 var(--material-background-color), -1px 0 0 0 var(--material-background-color);
      }

      :host([theme~="pill"]) [part="tabs"] ::slotted(vaadin-tab[selected]:first-child) {
        box-shadow: 1px 0 0 0 var(--material-background-color);
      }

      :host([theme~="pill"]) [part="tabs"] ::slotted(vaadin-tab[selected]:last-child) {
        box-shadow: -1px 0 0 0 var(--material-background-color);
      }
    </style>
  </template>
</dom-module>
